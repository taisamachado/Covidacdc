<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Conecta Comunidade - Líder de Rua</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<link rel="stylesheet" href="css/font/materialIcons.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


<link rel="stylesheet" href="node_modules/bootstrap/compiler/bootstrap.css">
<link rel="stylesheet" href="node_modules/bootstrap/compiler/style.css">

<script src="node_modules/jquery/dist/jquery.js"></script>
<script src="node_modules/popper.js/dist/popper.js"></script>
<script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>

<link rel="stylesheet" type="text/css" href="style/style.css">
<!-- <script src="js/tabela.js"></script> -->

</head>
<!-- Navigation -->
<nav
	class="navbar navbar-expand-sm navbar-dark bg-dark static-top fixed-top">
	<div class="container">
		<div class="collapse navbar-collapse" id="navbarResponsive">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item"><a class="nav-link" href="#"> <img
						src="logo.jpg" class="img-fluid rounded-circle" width="30"
						height="30" alt="logo" loading="lazy"></a></li>
				<li class="nav-item active"><a class="nav-link"
					href="InicioLogado.html">Início</a></li>
				<li class="nav-item"><a class="nav-link" href="./index.html">Logout</a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<body>


	<div class="container">
		<div class="table-wrapper">
			<div class="table-title">
				<div class="row">
					<div class="col-sm-8">
						<h2>
							<b>Líderes de Rua</b>
						</h2>
					</div>
					<div class="col-sm-4">
						<button type="button" class="btn btn-info add-new"
							onclick="novoVoluntario()">
							<i class="fa fa-plus"></i> Adicionar
						</button>
					</div>
					
					<div class="col-sm-4">
						<p></p>
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Pesquisa"
								id="" onkeyup="">
							<div class="input-group-append">
								<button class="btn btn-secondary" type="button">
									<i class="fa fa-search"></i>
								</button>
							</div>
						</div>
					</div>
					
				</div>
			</div>
			<table id="tableMain" class="table table-bordered">
				<thead>
					<tr >
						<th >Nome</th>
						<th >Endereço</th>
						<th style="width: 70px;" >N.º</th>
					    <th>Telefone</th>
						<th>Agente comunitário</th>
						<th>Ativo?</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody id="data">
				
				
					
<!-- 					<tr> -->
<!-- 						<td id = "nome"> </td> -->
<!-- 						<td id = "logradouro"> </td> -->
<!-- 						<td id = "numero"> </td> -->
<!-- 						<td id = "telefone"> </td> -->
<!-- 						<td id = "agcomunitario"> </td> -->
<!-- 						<td id = "ativo"> </td> -->
<!-- 						<td><a class="add" title="Add" data-toggle="tooltip"><i -->
<!-- 								class="material-icons">&#xE03B;</i></a> <a class="edit" title="Edit" -->
<!-- 							href="formVoluntarioEditar.html" data-toggle="tooltip"><i -->
<!-- 								class="material-icons">&#xE254;</i></a> <a class="delete" -->
<!-- 							title="Delete" data-toggle="tooltip"><i -->
<!-- 								class="material-icons">&#xE872;</i></a></td> -->
<!-- 					</tr> -->
				</tbody>
			</table>
		</div>
	</div>

	<style>
body {
	padding-top: 70px;
}

navbar-expand {-sm |-md|-lg|-xl
	
}

 .container {
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
  margin-right: auto;
  margin-left: auto;
}
 
</style>

	<script>
		function novoVoluntario() {
			location.href = "formVoluntarioNovo.html";
		}
		
// 		function myFunction() {
			
			//add event listener to table rows
//             let thetable = document.getElementById('tableMain').getElementsByTagName('tbody')[0]; 
//             for (let i = 0; i < thetable.rows.length; i++)
//                 {
//                     thetable.rows[i].onclick = function()
//                     {
//                     	localStorage["key1"] = document.getElementById("data").rows[i].cells.item(0).innerHTML;
// //                     	console.log(document.getElementById("data").rows[i].cells.item(0).innerHTML)
//                     };
//                 }        

// 			}
		
		var icons = '<td id="actions"><a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>'+
		'<a class="edit" title="Edit" href="formVoluntarioEditar.html" data-toggle="tooltip"><i id="demo" onclick="myFunction()" class="material-icons">&#xE254;</i></a>'+
		'<a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a></td>';
		
// 		 href="formVoluntarioEditar.html"
// 				document.getElementById ( "nome" ).innerText="ok1"
				fetch("https://mu5n9wq45h.execute-api.us-east-1.amazonaws.com/beta/api/lideresDeRua").then(
						res=>{
							res.json().then(
							
							data=>{
									
									var temp = "";
									
									data.forEach((u)=>{
										temp += "<tr>";
										temp += "<td id='nome'>"+u[1]+"</td>";//line 0
										temp += "<td id='logradouro'>"+u[2]+"</td>";//line 1
										temp += "<td id='numero'>"+u[3]+"</td>";//line 2
										temp += "<td id='telefone'>"+u[5]+"</td>";//line 3
										temp += "<td id='agente_comunitario_de_saude'>"+u[10]+"</td>";//line 4
										temp += "<td id='status'>"+u[12]+"</td>";//line 5
										temp += icons+"</td>";//line 6
										temp += "<td id='id' style='display:none;'>"+u[0]+"</td>";//line 7
										temp += "<td id='cep' style='display:none;'>"+u[4]+"</td>";//line 8
										temp += "<td id='email' style='display:none;'>"+u[6]+"</td>";//line 9
										temp += "<td id='data_nascimento'style='display:none;'>"+u[7]+"</td>";//line 10
										temp += "<td id='rg'style='display:none;'>"+u[8]+"</td>";//line 11
										temp += "<td id='cpf'style='display:none;'>"+u[9]+"</td>";//line 12
										temp += "<td id='observacoes'style='display:none;'>"+u[11]+"</td></tr>";//line 13
// 										localStorage["key1"] = u[];
									})
 									
									document.getElementById ( "data" ).innerHTML= temp;
									console.log(document.getElementById("data").rows[0].cells.item(7).innerHTML)
									
									let thetable = document.getElementById('tableMain').getElementsByTagName('tbody')[0]; 
						            for (let i = 0; i < thetable.rows.length; i++)
						                {
						                    thetable.rows[i].onclick = function()
						                    {
						                    	localStorage["id"] = document.getElementById("data").rows[i].cells.item(7).innerHTML;
						                    	localStorage["nome"] = document.getElementById("data").rows[i].cells.item(0).innerHTML;
						                    	localStorage["logradouro"] = document.getElementById("data").rows[i].cells.item(1).innerHTML;
						                    	localStorage["numero"] = document.getElementById("data").rows[i].cells.item(2).innerHTML;
						                    	localStorage["cep"] = document.getElementById("data").rows[i].cells.item(8).innerHTML;
						                    	localStorage["telefone"] = document.getElementById("data").rows[i].cells.item(3).innerHTML;
						                    	localStorage["agente_comunitario_de_saude"] = document.getElementById("data").rows[i].cells.item(4).innerHTML;
						                    	localStorage["email"] = document.getElementById("data").rows[i].cells.item(9).innerHTML;
						                    	localStorage["data_nascimento"] = document.getElementById("data").rows[i].cells.item(10).innerHTML;
						                    	localStorage["rg"] = document.getElementById("data").rows[i].cells.item(11).innerHTML;
						                    	localStorage["cpf"] = document.getElementById("data").rows[i].cells.item(12).innerHTML;
						                    	localStorage["status"] = document.getElementById("data").rows[i].cells.item(5).innerHTML;
						                    	localStorage["observacoes"] = document.getElementById("data").rows[i].cells.item(13).innerHTML;
// 						                     	console.log(document.getElementById("data").rows[i].cells.item(3).innerHTML)

											
						                    };
						                }  
						            
						            
						            
									
// 									localStorage["key1"] = document.getElementById("data").rows[0].cells.item(0).innerHTML;
									
// 									alert(document.getElementById("data").rows[0].cells.item(0).innerHTML)
							}
							
							
							)
							
							
						}
				
				)

	</script>


</body>
</html>
